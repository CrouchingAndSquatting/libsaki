#!/bin/bash

#
# This scirpt helps library callers that is a Qt project
#
# Run this script in the library caller's source directory
# to generate a libsaki.pri corresponds to that PWD
#

LIB_ROOT=$(dirname $0)
qmake -project \
	-o libsaki.pro \
	-t lib \
	-nopwd \
	"INCLUDEPATH += $LIB_ROOT/3rd/lua" \
	$LIB_ROOT
sed -i '/TEMPLATE =/d' libsaki.pro
sed -i '/TARGET =/d' libsaki.pro
sed -i '/# Auto*/c\# Generated by libsaki/gen_pri.sh, do NOT modify' libsaki.pro

# Some version of qmake will force the suffix to be ".pro",
# so fuck them
mv libsaki.pro libsaki.pri

